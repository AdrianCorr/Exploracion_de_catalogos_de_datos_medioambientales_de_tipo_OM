<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CTD Viewer</title>

  <!-- CSS de terceros: Leaflet, Leaflet Draw, Font Awesome y ZoomHome -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="lib/leaflet.zoomhome.css" />

  <!-- CSS de la aplicación: estilos globales y específicos de esta vista -->
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/view.css" />
</head>

<body>
  <!-- Cabecera de la aplicación -->
  <header class="view-header">
    <h1>CTD Viewer</h1>
  </header>

  <section class="view-container">
    <!-- Panel de filtros: mapa y controles temporales y de procedimiento -->
    <details open class="view-section">
      <summary class="view-summary">Filtros</summary>

      <!-- Mapa interactivo -->
      <div id="map"></div>
      <!-- Coordenadas del cuadro delimitador (BBox) -->
      <div id="bbox-coordinates" class="bbox-coordinates"></div>

      <!-- Filtros temporales -->
      <div class="filter-time">
        <label for="startDate"><strong>Fecha inicio</strong></label>
        <input type="datetime-local" id="startDate" name="startDate" />

        <label for="endDate"><strong>Fecha fin</strong></label>
        <input type="datetime-local" id="endDate" name="endDate" />
      </div>

      <!-- Filtro de procedimiento -->
      <div class="filter-procedure">
        <label for="procedure"><strong>Procedure</strong></label>
        <input type="text" id="procedure" name="procedure" />
      </div>

      <!-- Botón para ejecutar la búsqueda -->
      <div class="filter-actions">
        <button id="searchBtn">Buscar</button>
      </div>
    </details>

    <!-- Panel de resultados: lista de observaciones y contador -->
    <details open class="view-section">
      <summary class="view-summary">
        Resultados
        <span id="resultsCounter" class="results-counter"></span>
      </summary>
      <!-- Aquí se inyectarán dinámicamente las observaciones -->
      <div id="resultsList" class="results-list"></div>
    </details>
  </section>

  <!-- Scripts de terceros: Leaflet, Leaflet Draw, ZoomHome, Chart.js -->
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
  <script src="lib/leaflet.zoomhome.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Lógica de la aplicación: módulo de visualización -->
  <script type="module" src="js/view/view.js"></script>
</body>
</html>
